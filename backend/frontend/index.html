<!DOCTYPE html>
<html lang="en" data-theme="dark" data-site-style="default">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polleneer - The Social Hive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
          crossorigin="anonymous" referrerpolicy="no-referrer">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&family=Source+Code+Pro:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* CSS Variables for Theme */
        :root {
            /* Bee Theme Colors */
            --honey-yellow: #FFC30B;
            --honey-dark: #E6A800;
            --hive-orange: #FF8C00;
            --pollen-gold: #FFD700;
            --nectar-light: #FFF9C4;
            --bee-black: #1A1A1A;
            --wax-white: #F8F8F8;
            --comb-brown: #8B4513;
            --flower-pink: #FF69B4;
            --leaf-green: #228B22;
            --sky-blue: #87CEEB;
            --background-light: #FFFEF0;
            --background-dark: #0F0F0F;
            --card-light: #FFFFFF;
            --card-dark: #1E1E1E;
            --text-light: #333333;
            --text-dark: #E0E0E0;
            --border-light: #E0E0E0;
            --border-dark: #333333;
        }

        /* Default Dark Theme */
        [data-theme="dark"] {
            --bg-primary: var(--background-dark);
            --bg-secondary: var(--bee-black);
            --bg-card: var(--card-dark);
            --bg-input: #2A2A2A;
            --text-primary: var(--text-dark);
            --text-secondary: #AAAAAA;
            --border-color: var(--border-dark);
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        /* Light Theme */
        [data-theme="light"] {
            --bg-primary: var(--background-light);
            --bg-secondary: var(--wax-white);
            --bg-card: var(--card-light);
            --bg-input: #FFFFFF;
            --text-primary: var(--text-light);
            --text-secondary: #666666;
            --border-color: var(--border-light);
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        /* Site Styles */
        [data-site-style="default"] {
            --site-bg: var(--bg-primary);
            --site-font: 'Inter', sans-serif;
            --site-radius: 15px;
        }

        [data-site-style="rounded"] {
            --site-radius: 25px;
        }

        [data-site-style="sharp"] {
            --site-radius: 5px;
        }

        [data-site-style="honeycomb"] {
            --site-bg: linear-gradient(45deg, var(--bg-primary), var(--bg-secondary));
        }

        /* CSS Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--site-font, 'Inter'), sans-serif;
            background: var(--site-bg, var(--bg-primary));
            color: var(--text-primary);
            transition: all 0.3s ease;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--honey-yellow);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--honey-dark);
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .justify-center {
            justify-content: center;
        }

        .gap-2 { gap: 0.5rem; }
        .gap-4 { gap: 1rem; }
        .gap-6 { gap: 1.5rem; }

        .rounded {
            border-radius: var(--site-radius);
        }

        .shadow {
            box-shadow: 0 4px 20px var(--shadow-color);
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--bg-card);
            border-bottom: 2px solid var(--honey-yellow);
            z-index: 1000;
            padding: 0 20px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px var(--shadow-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            cursor: pointer;
        }

        .logo-icon {
            font-size: 28px;
            color: var(--honey-yellow);
            animation: float 3s ease-in-out infinite;
        }

        .logo-text {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 24px;
            background: linear-gradient(45deg, var(--honey-yellow), var(--hive-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-search {
            flex: 1;
            max-width: 500px;
            margin: 0 20px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 10px 40px 10px 15px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 25px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--honey-yellow);
            box-shadow: 0 0 0 2px rgba(255, 195, 11, 0.2);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .nav-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
            position: relative;
            font-size: 16px;
        }

        .nav-btn:hover {
            background: var(--bg-secondary);
            color: var(--honey-yellow);
        }

        .badge {
            position: absolute;
            top: 2px;
            right: 2px;
            background: var(--flower-pink);
            color: white;
            font-size: 10px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid var(--honey-yellow);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .profile-btn:hover {
            transform: scale(1.1);
        }

        .profile-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Main Layout */
        .app-container {
            display: flex;
            max-width: 1400px;
            margin: 60px auto 0;
            padding: 20px;
            gap: 20px;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            flex-shrink: 0;
            position: sticky;
            top: 80px;
            height: calc(100vh - 100px);
            overflow-y: auto;
        }

        .sidebar-section {
            background: var(--bg-card);
            border-radius: var(--site-radius);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid var(--honey-yellow);
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .user-avatar:hover {
            transform: scale(1.05);
        }

        .user-details h3 {
            font-size: 16px;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .user-details h3:hover {
            color: var(--honey-yellow);
        }

        .user-details p {
            color: var(--text-secondary);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .bee-role {
            background: var(--honey-yellow);
            color: var(--bee-black);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
        }

        .honey-display {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(45deg, var(--honey-yellow), var(--pollen-gold));
            padding: 15px;
            border-radius: 10px;
            color: var(--bee-black);
            margin-bottom: 20px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .honey-display:hover {
            transform: translateY(-2px);
        }

        .honey-amount {
            font-size: 24px;
            font-weight: 700;
        }

        .honey-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .nav-menu {
            list-style: none;
            margin-bottom: 20px;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-family: inherit;
            font-size: 14px;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--bg-secondary);
            color: var(--honey-yellow);
        }

        .nav-link i {
            width: 20px;
            text-align: center;
        }

        .create-post-btn {
            width: 100%;
            background: linear-gradient(45deg, var(--honey-yellow), var(--hive-orange));
            color: var(--bee-black);
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: transform 0.3s;
            font-family: inherit;
            font-size: 14px;
        }

        .create-post-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 195, 11, 0.3);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            max-width: 600px;
        }

        /* Create Post */
        .create-post {
            background: var(--bg-card);
            border-radius: var(--site-radius);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .post-input {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .user-avatar-small {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--honey-yellow);
            cursor: pointer;
        }

        .post-textarea {
            flex: 1;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
            color: var(--text-primary);
            font-size: 16px;
            resize: none;
            min-height: 100px;
            font-family: inherit;
            transition: all 0.3s;
        }

        .post-textarea:focus {
            outline: none;
            border-color: var(--honey-yellow);
            box-shadow: 0 0 0 2px rgba(255, 195, 11, 0.2);
        }

        .post-textarea::placeholder {
            color: var(--text-secondary);
        }

        .post-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-size: 14px;
            font-family: inherit;
        }

        .action-btn:hover {
            background: var(--bg-secondary);
            color: var(--honey-yellow);
        }

        .pollinate-btn {
            background: linear-gradient(45deg, var(--honey-yellow), var(--hive-orange));
            color: var(--bee-black);
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.3s;
            font-size: 14px;
            font-family: inherit;
        }

        .pollinate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 195, 11, 0.3);
        }

        /* Posts Feed */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .post-card {
            background: var(--bg-card);
            border-radius: var(--site-radius);
            padding: 20px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }

        .post-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--shadow-color);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .post-user {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .post-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--honey-yellow);
        }

        .user-name-role {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .user-role-badge {
            background: var(--honey-yellow);
            color: var(--bee-black);
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 600;
        }

        .post-meta {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .post-options {
            position: relative;
        }

        .options-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s;
            font-size: 14px;
        }

        .options-btn:hover {
            background: var(--bg-secondary);
            color: var(--honey-yellow);
        }

        .options-menu {
            position: absolute;
            right: 0;
            top: 100%;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 10px 0;
            min-width: 150px;
            z-index: 100;
            box-shadow: 0 4px 20px var(--shadow-color);
            display: none;
        }

        .options-menu.show {
            display: block;
            animation: slideDown 0.2s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .option-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            text-align: left;
            background: none;
            border: none;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 14px;
        }

        .option-item:hover {
            background: var(--bg-secondary);
            color: var(--honey-yellow);
        }

        .post-content {
            margin-bottom: 15px;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .post-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .post-tag {
            color: var(--honey-yellow);
            background: rgba(255, 195, 11, 0.1);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            border: none;
            font-family: inherit;
        }

        .post-tag:hover {
            background: rgba(255, 195, 11, 0.2);
            transform: translateY(-1px);
        }

        .post-media {
            margin-bottom: 15px;
            border-radius: 10px;
            overflow: hidden;
            max-height: 500px;
        }

        .post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .post-image:hover {
            transform: scale(1.01);
        }

        .post-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 10px;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .post-actions-bar {
            display: flex;
            justify-content: space-around;
            gap: 5px;
        }

        .post-action-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 8px;
            transition: all 0.3s;
            flex: 1;
            justify-content: center;
            font-family: inherit;
            font-size: 14px;
        }

        .post-action-btn:hover {
            background: var(--bg-secondary);
            color: var(--honey-yellow);
        }

        .post-action-btn.liked {
            color: var(--flower-pink);
        }

        .post-action-btn.pollinated {
            color: var(--honey-yellow);
        }

        /* Comments Section - FIXED */
        .comments-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            display: none;
        }

        .comments-section.show {
            display: block;
        }

        .comment {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 10px;
            background: var(--bg-secondary);
        }

        .comment-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--honey-yellow);
        }

        .comment-content {
            flex: 1;
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }

        .comment-author {
            font-weight: 600;
            font-size: 14px;
        }

        .comment-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .comment-text {
            font-size: 14px;
            line-height: 1.5;
        }

        .comment-actions {
            display: flex;
            gap: 15px;
            margin-top: 5px;
        }

        .comment-action {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 12px;
            transition: color 0.3s;
            font-family: inherit;
        }

        .comment-action:hover {
            color: var(--honey-yellow);
        }

        .add-comment {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .comment-input {
            flex: 1;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 10px 15px;
            color: var(--text-primary);
            font-size: 14px;
            font-family: inherit;
        }

        .comment-input:focus {
            outline: none;
            border-color: var(--honey-yellow);
        }

        .comment-submit-btn {
            background: var(--honey-yellow);
            color: var(--bee-black);
            border: none;
            border-radius: 20px;
            padding: 0 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-family: inherit;
        }

        .comment-submit-btn:hover {
            background: var(--honey-dark);
            transform: translateY(-2px);
        }

        /* Auth Pages */
        .auth-container {
            display: flex;
            min-height: 100vh;
        }

        .auth-left {
            flex: 1;
            background: linear-gradient(45deg, var(--honey-yellow), var(--hive-orange));
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .auth-left::before {
            content: '';
            position: absolute;
            width: 300%;
            height: 300%;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.3;
            animation: spin 20s linear infinite;
        }

        .auth-left h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .auth-left p {
            font-size: 18px;
            text-align: center;
            max-width: 500px;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .bee-animation {
            margin: 40px 0;
            font-size: 100px;
            animation: float 3s ease-in-out infinite;
            position: relative;
            z-index: 1;
        }

        .auth-right {
            flex: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--bg-primary);
        }

        .auth-card {
            width: 100%;
            max-width: 400px;
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px var(--shadow-color);
        }

        .auth-card h2 {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--honey-yellow);
        }

        .auth-card p {
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-control {
            padding: 12px 15px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--honey-yellow);
            box-shadow: 0 0 0 2px rgba(255, 195, 11, 0.2);
        }

        .auth-btn {
            background: linear-gradient(45deg, var(--honey-yellow), var(--hive-orange));
            color: var(--bee-black);
            border: none;
            padding: 14px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
            margin-top: 10px;
            font-family: inherit;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 195, 11, 0.3);
        }

        .auth-divider {
            text-align: center;
            margin: 20px 0;
            color: var(--text-secondary);
            position: relative;
            font-size: 14px;
        }

        .auth-divider:before,
        .auth-divider:after {
            content: '';
            position: absolute;
            top: 50%;
            width: 45%;
            height: 1px;
            background: var(--border-color);
        }

        .auth-divider:before {
            left: 0;
        }

        .auth-divider:after {
            right: 0;
        }

        .social-auth {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px;
            border: 1px solid var(--border-color);
            background: var(--bg-card);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s;
            font-family: inherit;
            font-size: 14px;
        }

        .social-btn:hover {
            background: var(--bg-secondary);
            border-color: var(--honey-yellow);
        }

        .auth-footer {
            text-align: center;
            margin-top: 30px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .auth-footer a {
            color: var(--honey-yellow);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: var(--site-radius);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
            border: 2px solid var(--honey-yellow);
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 20px;
            color: var(--honey-yellow);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: var(--honey-yellow);
        }

        .modal-body {
            padding: 20px;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--honey-yellow);
            color: var(--bee-black);
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px var(--shadow-color);
            z-index: 3000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            max-width: 300px;
            font-weight: 600;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--honey-yellow);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .right-sidebar {
                display: none;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                display: none;
            }
            
            .app-container {
                padding: 20px 10px;
            }
        }

        @media (max-width: 768px) {
            .auth-container {
                flex-direction: column;
            }
            
            .auth-left {
                padding: 20px;
                min-height: 300px;
            }
            
            .auth-left h1 {
                font-size: 32px;
            }
            
            .bee-animation {
                font-size: 60px;
                margin: 20px 0;
            }
            
            .nav-search {
                display: none;
            }
            
            .post-actions-bar {
                flex-wrap: wrap;
            }
            
            .post-action-btn {
                padding: 6px 10px;
                font-size: 12px;
            }
        }

        @media (max-width: 576px) {
            .navbar {
                padding: 0 10px;
            }
            
            .logo-text {
                font-size: 20px;
            }
            
            .app-container {
                margin-top: 60px;
                padding: 10px;
            }
            
            .create-post,
            .post-card {
                padding: 15px;
            }
            
            .modal-content {
                width: 95%;
                padding: 10px;
            }
        }

        /* Active states for interactions */
        .clicked {
            animation: clickEffect 0.3s ease;
        }

        @keyframes clickEffect {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <!-- Authentication Screen -->
    <div id="authScreen" class="auth-container">
        <div class="auth-left">
            <div class="bee-animation">üêù</div>
            <h1>Welcome to Polleneer</h1>
            <p>Where ideas take flight! Join our hive and connect with friends, share thoughts, and customize your space like never before.</p>
            <div style="margin-top: 40px; font-size: 14px; opacity: 0.8;">
                <p>"The world is buzzing with possibilities. Let's make some honey together!"</p>
            </div>
        </div>
        <div class="auth-right">
            <div class="auth-card">
                <h2>Enter the Hive</h2>
                <p>Sign in to start connecting</p>
                
                <form class="auth-form" id="loginForm">
                    <div class="form-group">
                        <label for="email">Email or Username</label>
                        <input type="text" id="email" class="form-control" placeholder="you@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                    </div>
                    
                    <div style="text-align: right; margin-bottom: 10px;">
                        <a href="#" id="forgotPassword" style="color: var(--honey-yellow); font-size: 14px; text-decoration: none;">Forgot password?</a>
                    </div>
                    
                    <button type="submit" class="auth-btn">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                </form>
                
                <div class="auth-divider">or continue with</div>
                
                <div class="social-auth">
                    <button type="button" class="social-btn" id="googleLogin">
                        <i class="fab fa-google" style="color: #DB4437;"></i>
                        Continue with Google
                    </button>
                    <button type="button" class="social-btn" id="githubLogin">
                        <i class="fab fa-github"></i>
                        Continue with GitHub
                    </button>
                </div>
                
                <div class="auth-footer">
                    New to the hive? <a href="#" id="showRegister">Create an account</a>
                </div>
            </div>
            
            <!-- Register Form -->
            <div class="auth-card hidden" id="registerCard">
                <h2>Join the Hive</h2>
                <p>Create your account to start your journey</p>
                
                <form class="auth-form" id="registerForm">
                    <div class="form-group">
                        <label for="regUsername">Username</label>
                        <input type="text" id="regUsername" class="form-control" placeholder="Choose a username" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="regEmail">Email</label>
                        <input type="email" id="regEmail" class="form-control" placeholder="you@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="regPassword">Password</label>
                        <input type="password" id="regPassword" class="form-control" placeholder="Create a strong password" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="regBeeRole">Choose Your Bee Role</label>
                        <select id="regBeeRole" class="form-control" required>
                            <option value="">Select your role</option>
                            <option value="queen">Queen Bee (Leader)</option>
                            <option value="worker">Worker Bee (Contributor)</option>
                            <option value="drone">Drone (Explorer)</option>
                            <option value="honeybee">Honey Bee (Creator)</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="auth-btn">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </form>
                
                <div class="auth-footer">
                    Already have an account? <a href="#" id="showLogin">Sign in</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="appScreen" class="hidden">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="logo" onclick="goToHome()">
                <div class="logo-icon">üêù</div>
                <div class="logo-text">Polleneer</div>
            </div>
            
            <div class="nav-search">
                <input type="text" class="search-input" placeholder="Search Polleneer..." id="searchInput">
                <i class="fas fa-search search-icon"></i>
            </div>
            
            <div class="nav-actions">
                <button class="nav-btn" id="themeToggle" title="Toggle theme">
                    <i class="fas fa-moon"></i>
                </button>
                
                <button class="nav-btn" id="createPostBtn" title="Create post">
                    <i class="fas fa-feather-alt"></i>
                </button>
                
                <div class="profile-btn" id="profileMenuBtn">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" alt="Profile" class="profile-img" id="currentUserAvatar">
                </div>
            </div>
        </nav>

        <!-- Main Layout -->
        <div class="app-container">
            <!-- Left Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-section">
                    <div class="user-info" onclick="goToProfile()">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" alt="Profile" class="user-avatar" id="sidebarUserAvatar">
                        <div class="user-details">
                            <h3 id="sidebarUserName">Guest</h3>
                            <p><span class="bee-role" id="sidebarUserRole">Guest</span> ‚Ä¢ <span id="sidebarHoneyPoints">0</span>üçØ</p>
                        </div>
                    </div>
                    
                    <div class="honey-display" onclick="showHoneyShop()">
                        <div>
                            <div class="honey-amount" id="honeyPoints">0</div>
                            <div class="honey-label">Honey Points</div>
                        </div>
                        <i class="fas fa-coins" style="font-size: 32px;"></i>
                    </div>
                    
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <button class="nav-link active" onclick="goToHome()">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="goToExplore()">
                                <i class="fas fa-hashtag"></i>
                                <span>Explore</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="goToProfile()">
                                <i class="fas fa-user"></i>
                                <span>Profile</span>
                            </button>
                        </li>
                    </ul>
                    
                    <button class="create-post-btn" onclick="showCreatePostModal()">
                        <i class="fas fa-feather-alt"></i>
                        Create Buzz
                    </button>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content" id="mainContent">
                <!-- Content will be loaded dynamically -->
                <div class="feed" id="homeFeed">
                    <!-- Posts will be loaded here -->
                </div>
            </main>
        </div>
    </div>

    <!-- Create Post Modal -->
    <div class="modal" id="createPostModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create Buzz</h3>
                <button class="modal-close" onclick="closeModal('createPostModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="post-input" style="border: none; padding: 0;">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" alt="Profile" class="user-avatar-small" id="modalUserAvatar">
                    <textarea class="post-textarea" id="postContent" placeholder="What's buzzing in your mind? Start pollinating ideas..." style="min-height: 150px;"></textarea>
                </div>
                
                <div style="margin: 20px 0;">
                    <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                        <button type="button" class="action-btn" onclick="addMediaToPost()">
                            <i class="fas fa-image"></i>
                            <span>Add Media</span>
                        </button>
                        <button type="button" class="action-btn" onclick="addTagToPost()">
                            <i class="fas fa-hashtag"></i>
                            <span>Add Tag</span>
                        </button>
                    </div>
                    
                    <div style="margin-bottom: 15px;" id="postTagsContainer">
                        <label style="display: block; margin-bottom: 5px; font-weight: 500;">Tags</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 5px;" id="postTags"></div>
                    </div>
                </div>
                
                <div style="display: flex; justify-content: flex-end; gap: 10px;">
                    <button type="button" class="action-btn" onclick="closeModal('createPostModal')">
                        Cancel
                    </button>
                    <button type="button" class="pollinate-btn" onclick="submitPost()">
                        <i class="fas fa-feather-alt"></i>
                        Post Buzz
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast" id="notificationToast"></div>

    <!-- JavaScript -->
    <script>
        // ============================================
        // GLOBAL VARIABLES AND INITIALIZATION
        // ============================================
        let currentUser = null;
        let posts = [];
        let comments = {}; // Store comments by post ID

        // Sample data
        const SAMPLE_USERS = [
            {
                id: 1,
                username: 'admin',
                displayName: 'Admin Bee',
                email: 'admin@polleneer.com',
                role: 'admin',
                bio: 'The hive administrator',
                honeyPoints: 9999,
                followers: 1200,
                following: 247,
                avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Admin',
                joined: '2024-01-01'
            },
            {
                id: 2,
                username: 'testuser',
                displayName: 'Test User',
                role: 'worker',
                bio: 'Just testing Polleneer!',
                honeyPoints: 250,
                followers: 10,
                following: 20,
                avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Test',
                joined: '2024-01-02'
            }
        ];

        const SAMPLE_POSTS = [
            {
                id: 1,
                userId: 1,
                content: "Welcome to Polleneer! üêù\n\nThis is our bee-themed social ecosystem where ideas cross-pollinate. Right now we're running with simulated data - real database coming soon!",
                tags: ['#Welcome', '#Polleneer', '#BeeTheChange'],
                media: null,
                likes: 42,
                comments: 8,
                pollinations: 15,
                views: 120,
                createdAt: '1h ago',
                isLiked: false,
                isPollinated: false
            },
            {
                id: 2,
                userId: 2,
                content: "Just testing out Polleneer! The bee animations are amazing and I love the honey points system. Can't wait for the real database to save my progress!",
                tags: ['#Test', '#FirstPost', '#BeeHappy'],
                media: null,
                likes: 25,
                comments: 3,
                pollinations: 7,
                views: 85,
                createdAt: '2h ago',
                isLiked: false,
                isPollinated: false
            },
            {
                id: 3,
                userId: 1,
                content: "üöÄ Polleneer Development Update:\n\n‚úÖ Frontend/Backend deployed\n‚úÖ User authentication working\n‚úÖ Post system functional\n‚è≥ Database connection coming next!\n\nThank you for being part of our hive!",
                tags: ['#Update', '#Development', '#Progress'],
                media: null,
                likes: 67,
                comments: 12,
                pollinations: 23,
                views: 210,
                createdAt: '31m ago',
                isLiked: false,
                isPollinated: false
            }
        ];

        // Sample comments for posts
        const SAMPLE_COMMENTS = {
            1: [
                { id: 1, userId: 2, text: 'Welcome to Polleneer! Excited to be here!', createdAt: '30m ago' },
                { id: 2, userId: 1, text: 'Thanks for joining us! üêù', createdAt: '25m ago' }
            ],
            2: [
                { id: 3, userId: 1, text: 'Glad you like it! More features coming soon!', createdAt: '1h ago' }
            ],
            3: [
                { id: 4, userId: 2, text: 'Amazing progress! Can\'t wait to see more!', createdAt: '20m ago' }
            ]
        };

        // ============================================
        // INITIALIZATION FUNCTIONS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupEventListeners();
            loadSampleData();
            
            // Check if user is already logged in
            const savedUser = localStorage.getItem('polleneer_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showApp();
                updateUIForUser();
                loadHomeFeed();
            } else {
                showAuth();
            }
        });

        function initializeApp() {
            // Load saved theme
            const savedTheme = localStorage.getItem('polleneer_theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeIcon(savedTheme);
            
            // Initialize comments
            comments = { ...SAMPLE_COMMENTS };
        }

        function setupEventListeners() {
            // Auth forms
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
            document.getElementById('showRegister').addEventListener('click', showRegisterForm);
            document.getElementById('showLogin').addEventListener('click', showLoginForm);
            document.getElementById('forgotPassword').addEventListener('click', handleForgotPassword);
            
            // Social login buttons
            document.getElementById('googleLogin').addEventListener('click', handleGoogleLogin);
            document.getElementById('githubLogin').addEventListener('click', handleGithubLogin);
            
            // Nav buttons
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('createPostBtn').addEventListener('click', showCreatePostModal);
            document.getElementById('profileMenuBtn').addEventListener('click', showProfileMenu);
            
            // Search
            document.getElementById('searchInput').addEventListener('input', handleSearch);
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performSearch();
            });
        }

        function loadSampleData() {
            posts = [...SAMPLE_POSTS];
        }

        // ============================================
        // AUTHENTICATION FUNCTIONS
        // ============================================
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Check for admin login
            if (email === 'admin' || email === 'admin@polleneer.com') {
                if (password === 'polleneer2024') {
                    currentUser = SAMPLE_USERS[0];
                    showToast('Welcome back, Admin! üêù');
                } else {
                    showToast('Invalid password for admin account');
                    return;
                }
            } else if (email === 'testuser' || email === 'test@polleneer.com') {
                if (password === 'password123') {
                    currentUser = SAMPLE_USERS[1];
                } else {
                    showToast('Invalid password');
                    return;
                }
            } else {
                // Auto-create new user for demo
                currentUser = {
                    id: SAMPLE_USERS.length + 1,
                    username: email.split('@')[0] || 'newuser',
                    displayName: email.split('@')[0] || 'New User',
                    email: email,
                    role: 'worker',
                    bio: 'New to Polleneer! Ready to start pollinating ideas.',
                    honeyPoints: 100,
                    followers: 0,
                    following: 0,
                    avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${email}`,
                    joined: new Date().toISOString().split('T')[0]
                };
            }
            
            // Save user to localStorage
            localStorage.setItem('polleneer_user', JSON.stringify(currentUser));
            
            // Show app
            showApp();
            updateUIForUser();
            loadHomeFeed();
            showToast(`Welcome back, ${currentUser.username}! üêù`);
        }

        function handleRegister(e) {
            e.preventDefault();
            const username = document.getElementById('regUsername').value;
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            const beeRole = document.getElementById('regBeeRole').value;
            
            if (!username || !email || !password || !beeRole) {
                showToast('Please fill all fields');
                return;
            }
            
            // Create new user
            currentUser = {
                id: SAMPLE_USERS.length + 1,
                username: username,
                displayName: username,
                email: email,
                role: beeRole,
                bio: 'New to Polleneer! Ready to start pollinating ideas.',
                honeyPoints: 100,
                followers: 0,
                following: 0,
                avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`,
                joined: new Date().toISOString().split('T')[0]
            };
            
            // Save user to localStorage
            localStorage.setItem('polleneer_user', JSON.stringify(currentUser));
            
            // Show app
            showApp();
            updateUIForUser();
            loadHomeFeed();
            showToast(`Welcome to Polleneer, ${username}! üéâ You've earned 100 Honey Points!`);
            
            // Switch to login form
            showLoginForm();
        }

        function handleGoogleLogin() {
            showToast('Google login would open here. In a real app, this would redirect to Google OAuth.');
        }

        function handleGithubLogin() {
            showToast('GitHub login would open here. In a real app, this would redirect to GitHub OAuth.');
        }

        function handleForgotPassword(e) {
            e.preventDefault();
            showToast('Password reset email would be sent. In a real app, this would trigger email reset.');
        }

        function showRegisterForm(e) {
            if (e) e.preventDefault();
            document.querySelector('.auth-card').classList.add('hidden');
            document.getElementById('registerCard').classList.remove('hidden');
        }

        function showLoginForm(e) {
            if (e) e.preventDefault();
            document.getElementById('registerCard').classList.add('hidden');
            document.querySelector('.auth-card').classList.remove('hidden');
        }

        function logout() {
            if (confirm('Are you sure you want to leave the hive?')) {
                currentUser = null;
                localStorage.removeItem('polleneer_user');
                showAuth();
                showToast('You have been logged out. Come back soon! üêù');
            }
        }

        // ============================================
        // UI MANAGEMENT FUNCTIONS
        // ============================================
        function showAuth() {
            document.getElementById('authScreen').classList.remove('hidden');
            document.getElementById('appScreen').classList.add('hidden');
        }

        function showApp() {
            document.getElementById('authScreen').classList.add('hidden');
            document.getElementById('appScreen').classList.remove('hidden');
        }

        function updateUIForUser() {
            if (!currentUser) return;
            
            // Update avatar
            const avatars = document.querySelectorAll('#currentUserAvatar, #sidebarUserAvatar, #modalUserAvatar');
            avatars.forEach(avatar => {
                avatar.src = currentUser.avatar;
            });
            
            // Update username
            document.getElementById('sidebarUserName').textContent = currentUser.displayName;
            
            // Update role
            document.getElementById('sidebarUserRole').textContent = getRoleName(currentUser.role);
            
            // Update honey points
            document.getElementById('sidebarHoneyPoints').textContent = currentUser.honeyPoints.toLocaleString();
            document.getElementById('honeyPoints').textContent = currentUser.honeyPoints.toLocaleString();
        }

        function getRoleName(role) {
            const roles = {
                'queen': 'Queen Bee',
                'worker': 'Worker Bee',
                'drone': 'Drone',
                'honeybee': 'Honey Bee',
                'admin': 'Admin'
            };
            return roles[role] || 'Bee';
        }

        // ============================================
        // THEME FUNCTIONS
        // ============================================
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('polleneer_theme', newTheme);
            updateThemeIcon(newTheme);
            showToast(`${newTheme.charAt(0).toUpperCase() + newTheme.slice(1)} theme activated`);
        }

        function updateThemeIcon(theme) {
            const icon = document.querySelector('#themeToggle i');
            if (theme === 'dark') {
                icon.className = 'fas fa-moon';
                document.getElementById('themeToggle').title = 'Switch to light theme';
            } else {
                icon.className = 'fas fa-sun';
                document.getElementById('themeToggle').title = 'Switch to dark theme';
            }
        }

        // ============================================
        // NAVIGATION FUNCTIONS
        // ============================================
        function goToHome() {
            document.getElementById('mainContent').innerHTML = `
                <div class="create-post">
                    <div class="post-input">
                        <img src="${currentUser ? currentUser.avatar : 'https://api.dicebear.com/7.x/avataaars/svg?seed=default'}" alt="Profile" class="user-avatar-small" onclick="goToProfile()">
                        <textarea class="post-textarea" placeholder="What's buzzing in your mind? Start pollinating ideas..." onclick="showCreatePostModal()"></textarea>
                    </div>
                    
                    <div class="post-actions">
                        <div class="action-buttons">
                            <button class="action-btn" onclick="showCreatePostModal()">
                                <i class="fas fa-image"></i>
                                <span>Media</span>
                            </button>
                            <button class="action-btn" onclick="showCreatePostModal()">
                                <i class="fas fa-hashtag"></i>
                                <span>Tag</span>
                            </button>
                        </div>
                        
                        <button class="pollinate-btn" onclick="showCreatePostModal()">
                            <i class="fas fa-feather-alt"></i>
                            Buzz
                        </button>
                    </div>
                </div>
                <div class="feed" id="homeFeed"></div>
            `;
            loadHomeFeed();
            updateActiveNavLink('home');
        }

        function goToExplore() {
            document.getElementById('mainContent').innerHTML = `
                <div style="background: var(--bg-card); border-radius: var(--site-radius); padding: 20px; margin-bottom: 20px;">
                    <h3 style="margin-bottom: 20px; color: var(--honey-yellow);"><i class="fas fa-hashtag"></i> Explore Polleneer</h3>
                    <p style="color: var(--text-secondary);">Discover trending topics and communities.</p>
                </div>
                <div class="feed" id="exploreFeed"></div>
            `;
            loadExploreFeed();
            updateActiveNavLink('explore');
        }

        function goToProfile() {
            if (!currentUser) {
                showToast('Please login to view profile');
                return;
            }
            
            document.getElementById('mainContent').innerHTML = `
                <div style="background: var(--bg-card); border-radius: var(--site-radius); padding: 20px; margin-bottom: 20px; border: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 20px;">
                        <img src="${currentUser.avatar}" alt="Profile" style="width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--honey-yellow);">
                        <div>
                            <h2 style="margin-bottom: 5px;">${currentUser.displayName}</h2>
                            <p style="color: var(--text-secondary); margin-bottom: 10px;">@${currentUser.username} ‚Ä¢ ${getRoleName(currentUser.role)}</p>
                            <p>${currentUser.bio}</p>
                            <div style="display: flex; gap: 20px; margin-top: 15px;">
                                <div>
                                    <div style="font-weight: 700; color: var(--honey-yellow);">${currentUser.followers}</div>
                                    <div style="font-size: 14px; color: var(--text-secondary);">Followers</div>
                                </div>
                                <div>
                                    <div style="font-weight: 700; color: var(--honey-yellow);">${currentUser.following}</div>
                                    <div style="font-size: 14px; color: var(--text-secondary);">Following</div>
                                </div>
                                <div>
                                    <div style="font-weight: 700; color: var(--honey-yellow);">${currentUser.honeyPoints}</div>
                                    <div style="font-size: 14px; color: var(--text-secondary);">Honey Points</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="feed" id="profileFeed"></div>
            `;
            loadProfileFeed();
            updateActiveNavLink('profile');
        }

        function updateActiveNavLink(page) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`.nav-link[onclick*="${page}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        // ============================================
        // POST MANAGEMENT FUNCTIONS
        // ============================================
        function loadHomeFeed() {
            const feed = document.getElementById('homeFeed');
            if (!feed) return;
            
            feed.innerHTML = posts.map(post => createPostHTML(post)).join('');
        }

        function loadExploreFeed() {
            const feed = document.getElementById('exploreFeed');
            if (!feed) return;
            
            feed.innerHTML = posts.map(post => createPostHTML(post)).join('');
        }

        function loadProfileFeed() {
            const feed = document.getElementById('profileFeed');
            if (!feed) return;
            
            // Filter posts by current user
            const userPosts = posts.filter(post => post.userId === currentUser.id);
            feed.innerHTML = userPosts.map(post => createPostHTML(post)).join('');
        }

        function createPostHTML(post) {
            const user = SAMPLE_USERS.find(u => u.id === post.userId) || SAMPLE_USERS[0];
            const postComments = comments[post.id] || [];
            
            return `
                <div class="post-card" id="post-${post.id}">
                    <div class="post-header">
                        <div class="post-user" onclick="viewUserProfile(${user.id})">
                            <img src="${user.avatar}" alt="User" class="post-avatar">
                            <div class="user-name-role">
                                <div class="user-name">
                                    ${user.displayName}
                                    <span class="user-role-badge">${getRoleName(user.role)}</span>
                                </div>
                                <div class="post-meta">@${user.username} ¬∑ ${post.createdAt}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="post-content">${formatPostContent(post.content)}</div>
                    
                    ${post.tags && post.tags.length > 0 ? `
                    <div class="post-tags">
                        ${post.tags.map(tag => `<span class="post-tag" onclick="searchTag('${tag}')">${tag}</span>`).join('')}
                    </div>
                    ` : ''}
                    
                    <div class="post-stats">
                        <div class="stat">
                            <i class="fas fa-retweet"></i>
                            <span>${post.pollinations} Pollinations</span>
                        </div>
                        <div class="stat">
                            <i class="fas fa-comment"></i>
                            <span>${post.comments} Comments</span>
                        </div>
                        <div class="stat">
                            <i class="fas fa-heart"></i>
                            <span>${post.likes} Likes</span>
                        </div>
                        <div class="stat">
                            <i class="fas fa-chart-line"></i>
                            <span>${post.views.toLocaleString()} Views</span>
                        </div>
                    </div>
                    
                    <div class="post-actions-bar">
                        <button class="post-action-btn ${post.isLiked ? 'liked' : ''}" onclick="likePost(${post.id})">
                            <i class="${post.isLiked ? 'fas' : 'far'} fa-heart"></i>
                            <span>${post.isLiked ? 'Liked' : 'Like'}</span>
                        </button>
                        <button class="post-action-btn" onclick="toggleComments(${post.id})">
                            <i class="far fa-comment"></i>
                            <span>Comment</span>
                        </button>
                        <button class="post-action-btn ${post.isPollinated ? 'pollinated' : ''}" onclick="pollinatePost(${post.id})">
                            <i class="${post.isPollinated ? 'fas' : 'far'} fa-retweet"></i>
                            <span>${post.isPollinated ? 'Pollinated' : 'Pollinate'}</span>
                        </button>
                    </div>
                    
                    <!-- Comments Section - FIXED -->
                    <div class="comments-section" id="comments-${post.id}">
                        <div id="comments-list-${post.id}">
                            ${postComments.map(comment => `
                                <div class="comment">
                                    <img src="${SAMPLE_USERS.find(u => u.id === comment.userId)?.avatar || 'https://api.dicebear.com/7.x/avataaars/svg?seed=default'}" alt="User" class="comment-avatar">
                                    <div class="comment-content">
                                        <div class="comment-header">
                                            <div class="comment-author">${SAMPLE_USERS.find(u => u.id === comment.userId)?.displayName || 'User'}</div>
                                            <div class="comment-time">${comment.createdAt}</div>
                                        </div>
                                        <div class="comment-text">${comment.text}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="add-comment">
                            <input type="text" class="comment-input" id="comment-input-${post.id}" placeholder="Write a comment..." onkeypress="if(event.key === 'Enter') addComment(${post.id})">
                            <button class="comment-submit-btn" onclick="addComment(${post.id})">Post</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function formatPostContent(content) {
            return content.replace(/\n/g, '<br>');
        }

        // ============================================
        // POST INTERACTION FUNCTIONS - FIXED
        // ============================================
        function likePost(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            if (!currentUser) {
                showToast('Please login to like posts');
                return;
            }
            
            post.isLiked = !post.isLiked;
            post.likes += post.isLiked ? 1 : -1;
            
            // Update UI
            updatePostUI(postId);
            
            // Add honey points for interaction
            if (post.isLiked && post.userId !== currentUser.id) {
                currentUser.honeyPoints += 5;
                updateUIForUser();
                localStorage.setItem('polleneer_user', JSON.stringify(currentUser));
                showToast('+5 Honey Points for liking a post! üçØ');
            }
        }

        function toggleComments(postId) {
            if (!currentUser) {
                showToast('Please login to comment');
                return;
            }
            
            const commentsSection = document.getElementById(`comments-${postId}`);
            if (commentsSection) {
                commentsSection.classList.toggle('show');
                const commentInput = document.getElementById(`comment-input-${postId}`);
                if (commentInput && commentsSection.classList.contains('show')) {
                    commentInput.focus();
                }
            }
        }

        function addComment(postId) {
            if (!currentUser) {
                showToast('Please login to comment');
                return;
            }
            
            const commentInput = document.getElementById(`comment-input-${postId}`);
            const commentText = commentInput.value.trim();
            
            if (!commentText) {
                showToast('Please enter a comment');
                return;
            }
            
            // Add comment to data
            if (!comments[postId]) {
                comments[postId] = [];
            }
            
            const newComment = {
                id: comments[postId].length + 1,
                userId: currentUser.id,
                text: commentText,
                createdAt: 'Just now'
            };
            
            comments[postId].push(newComment);
            
            // Update post comment count
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.comments += 1;
            }
            
            // Update UI
            const commentsList = document.getElementById(`comments-list-${postId}`);
            if (commentsList) {
                const commentHTML = `
                    <div class="comment">
                        <img src="${currentUser.avatar}" alt="User" class="comment-avatar">
                        <div class="comment-content">
                            <div class="comment-header">
                                <div class="comment-author">${currentUser.displayName}</div>
                                <div class="comment-time">Just now</div>
                            </div>
                            <div class="comment-text">${commentText}</div>
                        </div>
                    </div>
                `;
                commentsList.innerHTML += commentHTML;
            }
            
            // Clear input
            commentInput.value = '';
            
            // Update post stats
            updatePostUI(postId);
            
            // Add honey points
            currentUser.honeyPoints += 10;
            updateUIForUser();
            localStorage.setItem('polleneer_user', JSON.stringify(currentUser));
            showToast('+10 Honey Points for commenting! üçØ');
        }

        function pollinatePost(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            if (!currentUser) {
                showToast('Please login to pollinate posts');
                return;
            }
            
            post.isPollinated = !post.isPollinated;
            post.pollinations += post.isPollinated ? 1 : -1;
            
            // Update UI
            updatePostUI(postId);
            
            // Add honey points for pollination
            if (post.isPollinated && post.userId !== currentUser.id) {
                currentUser.honeyPoints += 15;
                updateUIForUser();
                localStorage.setItem('polleneer_user', JSON.stringify(currentUser));
                showToast('+15 Honey Points for pollinating an idea! üçØ');
            }
        }

        function updatePostUI(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            const postElement = document.getElementById(`post-${postId}`);
            if (!postElement) return;
            
            // Update stats
            const stats = postElement.querySelectorAll('.stat');
            if (stats[0]) stats[0].querySelector('span').textContent = `${post.pollinations} Pollinations`;
            if (stats[1]) stats[1].querySelector('span').textContent = `${post.comments} Comments`;
            if (stats[2]) stats[2].querySelector('span').textContent = `${post.likes} Likes`;
            
            // Update like button
            const likeBtn = postElement.querySelector('.post-action-btn');
            if (likeBtn) {
                likeBtn.classList.toggle('liked', post.isLiked);
                const likeIcon = likeBtn.querySelector('i');
                const likeText = likeBtn.querySelector('span');
                if (likeIcon) likeIcon.className = post.isLiked ? 'fas fa-heart' : 'far fa-heart';
                if (likeText) likeText.textContent = post.isLiked ? 'Liked' : 'Like';
            }
            
            // Update pollinate button
            const pollinateBtn = postElement.querySelector('.post-action-btn:nth-child(3)');
            if (pollinateBtn) {
                pollinateBtn.classList.toggle('pollinated', post.isPollinated);
                const pollinateIcon = pollinateBtn.querySelector('i');
                const pollinateText = pollinateBtn.querySelector('span');
                if (pollinateIcon) pollinateIcon.className = post.isPollinated ? 'fas fa-retweet' : 'far fa-retweet';
                if (pollinateText) pollinateText.textContent = post.isPollinated ? 'Pollinated' : 'Pollinate';
            }
        }

        // ============================================
        // POST CREATION FUNCTIONS
        // ============================================
        function showCreatePostModal() {
            if (!currentUser) {
                showToast('Please login to create posts');
                return;
            }
            openModal('createPostModal');
        }

        function submitPost() {
            const content = document.getElementById('postContent').value.trim();
            if (!content) {
                showToast('Please write something before posting!');
                return;
            }
            
            // Create new post
            const newPost = {
                id: posts.length + 1,
                userId: currentUser.id,
                content: content,
                tags: Array.from(document.querySelectorAll('#postTags .post-tag')).map(tag => tag.textContent),
                media: null,
                likes: 0,
                comments: 0,
                pollinations: 0,
                views: 0,
                createdAt: 'Just now',
                isLiked: false,
                isPollinated: false
            };
            
            posts.unshift(newPost); // Add to beginning
            
            // Clear form
            document.getElementById('postContent').value = '';
            document.getElementById('postTags').innerHTML = '';
            
            // Close modal
            closeModal('createPostModal');
            
            // Reload feed
            goToHome();
            
            // Add honey points
            currentUser.honeyPoints += 25;
            updateUIForUser();
            localStorage.setItem('polleneer_user', JSON.stringify(currentUser));
            
            showToast('Post created successfully! +25 Honey Points üçØ');
        }

        function addMediaToPost() {
            const url = prompt('Enter image URL:');
            if (url) {
                showToast('Media added! In a full version, this would preview the image.');
            }
        }

        function addTagToPost() {
            const tag = prompt('Enter tag (without #):');
            if (tag) {
                const tagsContainer = document.getElementById('postTags');
                const tagElement = document.createElement('span');
                tagElement.className = 'post-tag';
                tagElement.textContent = `#${tag}`;
                tagElement.onclick = function() { this.remove(); };
                tagsContainer.appendChild(tagElement);
            }
        }

        // ============================================
        // MODAL FUNCTIONS
        // ============================================
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function showProfileMenu() {
            if (!currentUser) {
                showToast('Please login to access profile menu');
                return;
            }
            
            const action = confirm('Profile Menu:\n\n1. View Profile\n2. Logout\n\nClick OK for Profile, Cancel for Logout');
            if (action) {
                goToProfile();
            } else {
                logout();
            }
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        function showToast(message) {
            const toast = document.getElementById('notificationToast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function viewUserProfile(userId) {
            const user = SAMPLE_USERS.find(u => u.id === userId);
            if (user) {
                alert(`Viewing ${user.username}'s profile. In a real app, this would navigate to their profile page.`);
            }
        }

        function searchTag(tag) {
            showToast(`Searching for ${tag}... In a real app, this would show posts with that tag.`);
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (query) {
                showToast(`Searching for "${query}"... In a real app, this would show search results.`);
            }
        }

        function handleSearch() {
            // Real-time search would be implemented here
        }

        function showHoneyShop() {
            showToast('Honey Shop would open here. In a real app, this would show items you can buy with Honey Points.');
        }

        // ============================================
        // INITIALIZE ON LOAD
        // ============================================
        // Close modals with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal.show').forEach(modal => {
                    modal.classList.remove('show');
                });
            }
        });

        // Close modals when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });
    </script>
</body>
</html>
